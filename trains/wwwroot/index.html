<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>A-train</title>

    <link href="//fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic" rel="stylesheet">
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="app/app.css" rel="stylesheet" />
</head>
<body>
    <header><h1>A-train</h1></header>

    <form data-bind="submit: search">
        <select data-bind="options: stations,
                           optionsText: 'stationName',
                           value: startStation"></select>
        <select data-bind="options: stations,
                           optionsText: 'stationName',
                           optionsCaption: '-- Valitse --',
                           value: endStation"></select>

        <button type="submit">Search</button>
    </form>

    <table data-bind="visible: trains().length > 0">
    <thead>
        <tr>
            <th></th>
            <th>Train</th>
            <th></th>
            <th>Station</th>
            <th>Scheduled</th>
            <th>Estimate</th>
            <th>Actual</th>
            <th>Difference</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: trains">
        <tr>
            <td data-bind="text: commuterLineID" ></td>
            <td data-bind="text: trainNumber"></td>
            <td><a href="" data-bind="click: toggleDetails"><i class="fa" data-bind="css:{'fa-minus':showDetails(),'fa-plus':!showDetails()}"></i></a></td>
            <td data-bind="text: $root.stationName(destination().stationShortCode)"></td>
            <td data-bind="text: scheduledTime"></td>
            <td data-bind="text: liveEstimateTime"></td>
            <td data-bind="text: actualTime"></td>
            <td data-bind="text: timeDiff,css:{green:timeDiff() <=0,red:timeDiff() > 0}"></td>
        </tr>

        <!-- ko foreach: timetable -->
            <tr data-bind="visible: $parent.showDetails">
                <td colspan="2"></td>
                <td><i class="fa" data-bind="css: cssType"></i></td>
                <td data-bind="text: $root.stationName(stationShortCode)"></td>
                <td data-bind="text: getTime('scheduledTime')"></td>
                <td data-bind="text: getTime('liveEstimateTime')"></td>
                <td data-bind="text: getTime('actualTime')"></td>
                <td data-bind="text: timeDiff,css:{green:timeDiff() <=0,red:timeDiff() > 0}"></td>
            </tr>
        <!-- /ko -->
    </tbody>
    </table>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.1/moment.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>
    <script src="app/app.js"></script>
</body>
</html>